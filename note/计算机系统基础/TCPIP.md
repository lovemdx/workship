OSI七层参考模型
    应用层 - 表示层 -会话层- 传输控制层 - 网络层 -链路层 -物理层 

TCP/IP协议    //协议就是双方约束死的
    程序：应用层                            应用层
    内核：传输控制层                        传输控制层     
          网络层 （TCP/UDP                  网络层
          链路层                            链路层
          物理层                            物理层

TCP与UDP
    UDP协议：
    问题：只填写目标和内容，发出去完事
         特点：优点：占用系统资源少
              缺点:不保证能否送达，两次送达之间是否乱序
    TCP：
        问题：什么是TCP？
        解决：面向连接的可靠的传输协议。

        问题：互联网信道是不可靠的，怎么建立可靠地链接？
        解决：三次握手
                1.C端给S端发送SYN包       S端认为C端能发，收不收不知道    C,S端都在内存中开辟资源
                2.S端给C端发送SYN+ACK包    C端认为S端能收能发
                3.C端给S端发送ACK包        S端确认C端能收能发
                由此建立起链接，可以传输数据
            注意：为什么不两次就建立链接？怕之前C端发的SYN包被阻塞，导致C端S端状态不一致
            注意：三次握手后，双方开辟了服务器资源后，连接就有了。连接不是物理的，是开辟了系统资源。

        问题：有时候数据量大，包不能一次发送完，要多次发送，怎么保证不乱序，不丢包？
        解决：TCP为每一个链接建立了发送缓冲区，从零开始每个字节的序列号增加1。发送数据时，从发送缓冲区取一部分数据组成发送报文，TCP协议头中附带序列号和长度。接收端需要发送确认报文ACK，ACK=序列号+长度，也就是下一段报文的起始序列号。发送端也可以一次发送多包数据，接收端发送一次ACK就好了。对端可以凭借此规则把切割的包拼起来，顺序和漏就避免了
            发送报文格式：序列号、长度、数据内容

        问题：C和S端都可以发起断开连接的请求，怎么在不稳定的信道中可靠的断开连接？
        解决：四次挥手 假设C端主动关闭
                1.C端发送FIN包，表示要关闭连接，C端进入FIN-WAIT-1状态
                2.S端接收后，S端发送ACK包，表示知道了，S端进入CLOSE-WAIT状态
                3.继续传输数据，发完了后，S端发送FIN包，S端进入LAST-ACK状态C段进入FIN-WAIT-2状态         //为了让服务器吧数据传完
                4.C端回复ACK包，进入超时等待状态，服务端收到ACK包后立即断开
        
        问题：如果C或S某一端突然断开了，任何一端是否可以感知断开这件事？
        回答：不知道。双方其实都是内存，如果双方App都不发包，永远都有内存开辟着
        
        问题：一直占用内存咋办？
        回答：内核中有心跳(keepalive)机制，如果发的包一直没有回复，就会断开。但应用层的心跳也可以设置，监听的是服务器角色的健康（主服务器挂了，启用备用服务器）

        问题：高并发，负载均衡
        解决：LVS负载均衡服务器

    链接：
        链接：链接本质是什么？本质是双方的内存资源，释放了资源。    
        数据传输：传个包，对方要有回应    
        长链接：三次握手后，不需要断开重新建立链接。其实就是while循环
        短连接：三次握手后，一次发收之后就断开


Socket： 
    问题:APP程序本质上是与系统内核做交互，内核里有接收队列，发送队列。内核统一调度管理。本质上是单机
    怎么让不同主机、不同应用之间通信？
    内容：四元组 源头ip+端口  目标IP+端口  表示绝对唯一的链接 

    端口号：一共65535个  
        （1）一个网卡的客户主机和服务主机，理论上可以建立的链接的数量是多少？端口数65535^2 
        （2）一个网卡的客户主机和服务程序，理论上可以建立的链接是多少？端口数65535个
        （3）如果客户主机想链接十万个怎么办？插两块网卡，就有两个IP地址了。

网路层
    寻址 IP：IP地址描述网络号、主机号
        掩码：掩码和IP做按位与运算，得到网络号；最后一个是主机号
        网关：下一跳，也就是路由器
        域名解析DNS：根服务器，把ip和域名对应
    路由 route：
        路由表：只需要记住下一跳，不需要把互联网所有的通路都保存下来。
        有IP地址，有MAC地址
链路层
    arp协议：在局域网中，需要arp协议，通过IP地址获取物理地址
    mac地址：物理地址
    注意：Socket一直不变，Mac地址一直在变，像一个链表



